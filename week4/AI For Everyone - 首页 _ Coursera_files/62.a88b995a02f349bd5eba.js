(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"+uPB":function(module,exports,e){},"/CCb":function(module,exports,e){},"4xeL":function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return r.default.get("DiscussionsSubscriptionsWhitelist","validCourseIds").indexOf(e)>-1};var t,r=_interopRequireDefault(e("KMW/"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},CSo3:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteSubscription=exports.addSubscription=exports.fetchSubscriptionForForum=void 0;var t,r=_interopRequireDefault(e("QbLZ")),u,i=_interopRequireWildcard(e("YDId"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o=exports.fetchSubscriptionForForum=function fetchSubscriptionForForum(e,t){var r=t.forumSubscriptionId,u=t.forumType;return i.getForumSubscription(r,u).then(function(t){e.dispatch("UPDATE_SUBSCRIPTION",t)}).fail(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)})},n=exports.addSubscription=function addSubscription(e,t){var r=t.forumSubscriptionId,u=t.forumType;return e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isInProgress:!0}),i.subscribeUserToEntity(r,u).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isSubscribed:!0})}).fail(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)})},s=exports.deleteSubscription=function deleteSubscription(e,t){var u=t.subscription,o=t.forumSubscriptionId,n=t.forumType;return e.dispatch("UPDATE_SUBSCRIPTION",(0,r.default)({},u,{isInProgress:!0})),i.unsubscribeUserFromEntity(o,n).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:o,isSubscribed:!1})}).fail(function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)})}},Ek0i:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),u,i=_interopRequireDefault(e("FYw3")),o,n=_interopRequireDefault(e("mRg0")),s,a=_interopRequireDefault(e("w/1P")),l=e("Bgbc"),f,p=_interopRequireDefault(e("sbe7")),c=e("l2sx"),d=e("VYij");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("cIEV");var m=function emptyFunction(){},b=function(e){function Breadcrumbs(){return(0,r.default)(this,Breadcrumbs),(0,i.default)(this,e.apply(this,arguments))}return(0,n.default)(Breadcrumbs,e),Breadcrumbs.prototype.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(d.identity)},Breadcrumbs.prototype.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,u=e.separator,i=e.separatorStyles,o=this.getFilteredLinks();return p.default.createElement("ol",{className:(0,a.default)("rc-Breadcrumbs inline",t)},o.map(function(e,t){var n=[p.default.createElement("li",null,e.href?p.default.createElement(c.Link,{className:r,to:e.href,onClick:e.onClick||m},e.label):p.default.createElement("span",{className:r},e.label))];return t!==o.length-1&&n.push(p.default.createElement("li",(0,l.css)("divider",i),u||"/")),n}))},Breadcrumbs}(p.default.Component);exports.default=b},OVKh:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),u,i=_interopRequireDefault(e("FYw3")),o,n=_interopRequireDefault(e("mRg0")),s,a,l,f=_interopRequireDefault(e("VYij")),p,c=_interopRequireDefault(e("sbe7")),d,m=_interopRequireDefault(e("sQ/U")),b=e("CSo3"),y,S=_interopRequireDefault(e("KRcl")),h,T=_interopRequireDefault(e("y1LI")),v,D=_interopRequireDefault(e("8cuT")),R,F=_interopRequireDefault(e("4xeL")),g,q=_interopRequireDefault(e("GP6s"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("UaPE");var P=(a=s=function(e){function SubscriptionButton(t,u){(0,r.default)(this,SubscriptionButton);var o=(0,i.default)(this,e.call(this,t,u));return o.toggleSubscription=function(){var e=o.props,t=e.isSubscribed,r=e.forumType,u=e.subscription,i=e.forumSubscriptionId;t?(o.context.executeAction(b.deleteSubscription,{subscription:u,forumSubscriptionId:i,forumType:r}),o.setState({showSubscriptionDetails:!0,subscriptionDetails:(0,q.default)("You will no longer receive emails whenever new threads are added.")})):(o.context.executeAction(b.addSubscription,{forumType:r,forumSubscriptionId:i}),o.setState({showSubscriptionDetails:!0,subscriptionDetails:(0,q.default)("You will receive emails whenever new threads are added.")}))},o.state={canModerateGroup:!1,subscriptionDetails:null,showSubscriptionDetails:!1},o}return(0,n.default)(SubscriptionButton,e),SubscriptionButton.prototype.componentDidMount=function componentDidMount(){var e=this,t=this.props,r=t.groupId,u=t.subscription,i=t.forumSubscriptionId,o=t.forumType,n=m.default.isSuperuser(),s=m.default.isAuthenticatedUser();u||this.context.executeAction(b.fetchSubscriptionForForum,{forumType:o,forumSubscriptionId:i}),r&&(0,S.default)(r,s,n).then(function(t){return e.setState({canModerateGroup:t})})},SubscriptionButton.prototype.componentDidUpdate=function componentDidUpdate(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,u=e.forumType;t||this.context.executeAction(b.fetchSubscriptionForForum,{forumType:u,forumSubscriptionId:r})},SubscriptionButton.prototype.render=function render(){var e=this.props,t=e.subscription,r=e.isSubscribed,u=e.hasError,i=e.courseId,o=e.hasModerationRole,n=e.isSubscriptionInProgress,s=this.state,a=s.canModerateGroup,l=s.showSubscriptionDetails,f=s.subscriptionDetails;if(!(0,F.default)(i)&&!o&&!a)return null;return c.default.createElement("div",{className:"rc-SubscriptionButton horizontal-box vertical-when-mobile align-items-vertical-center"},c.default.createElement("button",{className:"passive",onClick:this.toggleSubscription,disabled:!t},(!t||n)&&c.default.createElement(T.default,{name:"spinner",className:"cif-spin"}),!!t&&!n&&(r?(0,q.default)("Unsubscribe"):(0,q.default)("Subscribe"))),!u&&l&&c.default.createElement("div",{className:"message caption-text"},f),u&&c.default.createElement("div",{className:"errorMessage"},(0,q.default)("Sorry, something went wrong. Try again.")))},SubscriptionButton}(c.default.Component),s.propTypes={hasModerationRole:c.default.PropTypes.bool,hasError:c.default.PropTypes.bool,courseId:c.default.PropTypes.string,forumSubscriptionId:c.default.PropTypes.string,subscription:c.default.PropTypes.object,forumType:c.default.PropTypes.string,groupId:c.default.PropTypes.string,isSubscribed:c.default.PropTypes.bool,isSubscriptionInProgress:c.default.PropTypes.bool},s.contextTypes={executeAction:c.default.PropTypes.func.isRequired},a);exports.default=f.default.compose((0,D.default)(["SubscriptionStore","CourseMembershipStore","CourseStore"],function(e,t){var r=e.SubscriptionStore,u=e.CourseMembershipStore,i=e.CourseStore,o=t.forumId,n=o&&o.split("~"),s=o&&m.default.get().id+"~"+n[0]+"~"+n[1];return{forumSubscriptionId:s,courseId:i.getCourseId(),hasModerationRole:u.hasModerationRole()||m.default.isSuperuser(),hasError:r.hasError(),subscription:r.getSubscription(s),isSubscribed:r.getIsSubscribed(s),isSubscriptionInProgress:r.getIsSubscriptionInProgress(s)}}))(P)},UaPE:function(module,exports,e){var t=e("mibK"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var u={transform:void 0},i=e("aET+")(t,u);t.locals&&(module.exports=t.locals)},Ub7k:function(module,exports,e){var t=e("/CCb"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var u={transform:void 0},i=e("aET+")(t,u);t.locals&&(module.exports=t.locals)},YDId:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsubscribeUserFromEntity=exports.subscribeUserToEntity=exports.getForumSubscription=void 0;var t,r=_interopRequireDefault(e("obES"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=exports.getForumSubscription=function getForumSubscription(e,t){return r.default.getSubscription(e,t).then(function(e){return Object.assign(e.elements[0],{isSubscribed:!0})}).catch(function(t){if(404===t.status)return{id:e,isSubscribed:!1};throw t})},i=exports.subscribeUserToEntity=function subscribeUserToEntity(e,t){return r.default.subscribe(e,t)},o=exports.unsubscribeUserFromEntity=function unsubscribeUserFromEntity(e,t){return r.default.unsubscribe(e,t)}},arLX:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("QbLZ")),u=e("SaLm");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.default=function(e){if(!e.currentForum)return e;var t=e.courseForums.concat(e.mentorForums).concat(e.groupForums),i=t.find(function(e){return e.forumType.typeName===u.naptimeForumTypes.rootForumType}),o=e.currentForum;e.currentForum.parentForumId&&e.currentForum.parentForumId!==i.id&&(o=t.find(function(t){return t.id===e.currentForum.parentForumId}));var n=t.filter(function(e){return e.parentForumId===o.id});return n.unshift(o),(0,r.default)({},e,{listedForums:n,parentForumId:o.id})}},cIEV:function(module,exports,e){var t=e("+uPB"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var u={transform:void 0},i=e("aET+")(t,u);t.locals&&(module.exports=t.locals)},jYk1:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),u,i=_interopRequireDefault(e("FYw3")),o,n=_interopRequireDefault(e("mRg0")),s,a,l,f=_interopRequireDefault(e("sbe7")),p,c=_interopRequireDefault(e("VYij")),d,m=_interopRequireDefault(e("w/1P")),b=e("l2sx"),y,S=_interopRequireDefault(e("Akn8")),h,T=_interopRequireDefault(e("BZ+2")),v,D=_interopRequireDefault(e("zFZo")),R,F=_interopRequireDefault(e("weTL")),g,q=_interopRequireDefault(e("+LJP")),P,E=_interopRequireDefault(e("pqXt")),I,N=_interopRequireDefault(e("VXRf")),w=e("hN99"),x,O=_interopRequireDefault(e("arLX")),C,U=_interopRequireDefault(e("oQ9N")),k,M=_interopRequireDefault(e("GP6s"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("vJ/u");var B=(a=s=function(e){function SubforumSidebar(){return(0,r.default)(this,SubforumSidebar),(0,i.default)(this,e.apply(this,arguments))}return(0,n.default)(SubforumSidebar,e),SubforumSidebar.prototype.render=function render(){var e=this.props,t=e.listedForums,r=e.currentForumId,u=e.parentForumId,i=e.courseSlug;if(!t||t.length<=1)return null;return f.default.createElement("div",{className:"rc-SubforumSidebar card-rich-interaction flex-1"},f.default.createElement("h2",{className:"subforums-list-title headline-1-text color-secondary-text"},(0,M.default)("Subforums")),f.default.createElement("ul",{className:"nostyle"},t.map(function(e){var t=(0,m.default)("forum-title",{"body-2-text":e.id===r,"body-1-text":e.id!==r}),o=S.default.join((0,w.getCourseRootPath)(i),e.link);return f.default.createElement(b.Link,{key:e.id,to:o,className:"nostyle"},f.default.createElement("li",{className:"subforum-entry"},e.id===r&&f.default.createElement("div",{className:"current-forum-indicator"}),f.default.createElement("div",{className:t},e.id===u?(0,M.default)("All"):e.title)))})))},SubforumSidebar}(f.default.Component),s.propTypes={courseSlug:f.default.PropTypes.string,listedForums:f.default.PropTypes.arrayOf(f.default.PropTypes.oneOfType([f.default.PropTypes.instanceOf(T.default),f.default.PropTypes.instanceOf(D.default),f.default.PropTypes.instanceOf(F.default)])),currentForumId:f.default.PropTypes.string,parentForumId:f.default.PropTypes.string},a);exports.default=c.default.compose((0,U.default)({fields:["link","title","description","parentForumId"]}),(0,q.default)(E.default),(0,N.default)(O.default))(B)},mibK:function(module,exports,e){},obES:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsubscribe=exports.subscribe=exports.getSubscription=void 0;var t,r=_interopRequireDefault(e("wiyT")),u,i=_interopRequireDefault(e("CWYE")),o=e("SaLm");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var n=(0,i.default)("/api/onDemandCourseForumSubscriptions.v1",{type:"rest"}),s=(0,i.default)("/api/onDemandMentorForumSubscriptions.v1",{type:"rest"}),a=(0,i.default)("/api/groupForumSubscriptions.v1",{type:"rest"}),l=exports.getSubscription=function getSubscription(e,t){return t===o.naptimeForumTypes.mentorForumType?(0,r.default)(s.get(e)):t===o.naptimeForumTypes.groupForumType?(0,r.default)(a.get(e)):(0,r.default)(n.get(e))},f=exports.subscribe=function subscribe(e,t){return t===o.naptimeForumTypes.mentorForumType?(0,r.default)(s.put(e)):t===o.naptimeForumTypes.groupForumType?(0,r.default)(a.put(e)):(0,r.default)(n.put(e))},p=exports.unsubscribe=function unsubscribe(e,t){return t===o.naptimeForumTypes.mentorForumType?(0,r.default)(s.delete(e)):t===o.naptimeForumTypes.groupForumType?(0,r.default)(a.delete(e)):(0,r.default)(n.delete(e))};exports.default={getSubscription:l,subscribe:f,unsubscribe:p}},"vJ/u":function(module,exports,e){var t=e("xjZ3"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var u={transform:void 0},i=e("aET+")(t,u);t.locals&&(module.exports=t.locals)},vkTq:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,r=_interopRequireDefault(e("iCc5")),u,i=_interopRequireDefault(e("FYw3")),o,n=_interopRequireDefault(e("mRg0")),s,a,l,f=_interopRequireDefault(e("sbe7")),p=e("VYij"),c,d=_interopRequireDefault(e("Akn8")),m,b=_interopRequireDefault(e("oVXz")),y=e("hN99"),S,h=_interopRequireDefault(e("JUgE")),T,v=_interopRequireDefault(e("Ek0i")),D,R=_interopRequireDefault(e("OVKh")),F,g=_interopRequireDefault(e("STl7")),q,P=_interopRequireDefault(e("jYk1")),E,I=_interopRequireDefault(e("UVOs")),N,w=_interopRequireDefault(e("5VK0")),x,O=_interopRequireDefault(e("FfoE")),C,U=_interopRequireDefault(e("pqXt")),k,M=_interopRequireDefault(e("arLX")),B=e("SaLm"),L,j=_interopRequireDefault(e("oQ9N")),A,V=_interopRequireDefault(e("BZ+2")),Y,X=_interopRequireDefault(e("zFZo")),Z,z=_interopRequireDefault(e("weTL")),J,K=_interopRequireDefault(e("VXRf")),G,Q=_interopRequireDefault(e("+LJP")),W,H=_interopRequireDefault(e("GP6s"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("Ub7k");var ee=(a=s=function(e){function ThreadsView(){return(0,r.default)(this,ThreadsView),(0,i.default)(this,e.apply(this,arguments))}return(0,n.default)(ThreadsView,e),ThreadsView.prototype.renderSubscriptionButton=function renderSubscriptionButton(){var e=this.props.currentForum;if(!e||e.forumType.typeName===B.naptimeForumTypes.itemForumType)return null;return f.default.createElement("div",{className:"flex-1"},f.default.createElement(R.default,{forumId:this.props.currentForum&&this.props.currentForum.id,forumType:this.props.currentForum&&this.props.currentForum.forumType.typeName,groupId:this.props.currentForum&&this.props.currentForum.forumType.definition.groupId}))},ThreadsView.prototype.render=function render(){var e=this.props.currentForum;if(!e)return f.default.createElement("div",{className:"forum-name headline-5-text color-primary-text"},(0,H.default)("Oops! Looks like this thread isn't viewable or does not exist."));var t=e.parentForumId&&this.props.listedForums.find(function(t){return e.parentForumId===t.id}),r=e.title,u=e.description,i=e.id,o=d.default.join((0,y.getCourseRootPath)(this.props.courseSlug),e.link),n=[{label:(0,H.default)("Discussion Forums"),href:(0,y.getCourseDiscussionsUrl)()},t?{label:t.title,href:d.default.join((0,y.getCourseRootPath)(this.props.courseSlug),t.link)}:void 0],s=!!this.context.router.params.question_id;return f.default.createElement("div",{className:"rc-ThreadsView"},f.default.createElement("div",{className:"horizontal-box vertical-when-tablet"},f.default.createElement("div",{className:"flex-2 threads-view-header"},f.default.createElement(v.default,{className:"breadcrumbs",links:n}),f.default.createElement("div",null,f.default.createElement("div",{className:"forum-name headline-5-text color-primary-text"},r),!s&&f.default.createElement("div",{className:"forum-description horizontal-box align-items-vertical-center vertical-when-mobile"},f.default.createElement(h.default,{className:"body-1-text",cml:u}),f.default.createElement("div",null,this.renderSubscriptionButton())))),f.default.createElement("div",{className:"flex-1 align-self-end session-switcher-container"},f.default.createElement(g.default,null))),f.default.createElement("div",{className:"horizontal-box align-items-top vertical-when-tablet"},f.default.createElement(b.default,{className:"flex-2 discussions-body-column",key:i,backLink:o}),f.default.createElement(P.default,null)))},ThreadsView}(f.default.Component),s.propTypes={currentForum:f.default.PropTypes.oneOfType([f.default.PropTypes.instanceOf(V.default),f.default.PropTypes.instanceOf(X.default),f.default.PropTypes.instanceOf(z.default)]),listedForums:f.default.PropTypes.arrayOf(f.default.PropTypes.oneOfType([f.default.PropTypes.instanceOf(V.default),f.default.PropTypes.instanceOf(X.default),f.default.PropTypes.instanceOf(z.default)])),courseSlug:f.default.PropTypes.string},s.contextTypes={router:f.default.PropTypes.object.isRequired},a);exports.default=(0,p.compose)((0,j.default)({fields:["title","description","link"],subcomponents:[P.default,I.default,w.default,O.default]}),(0,Q.default)(U.default),(0,K.default)(M.default))(ee)},xjZ3:function(module,exports,e){}}]);
//# sourceMappingURL=62.a88b995a02f349bd5eba.js.map