(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"2Lb7":function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,o=_interopRequireDefault(e("iCc5")),r,u=_interopRequireDefault(e("FYw3")),i,n=_interopRequireDefault(e("mRg0"));exports.default=function(e){return function(t){var r,i,s=t.displayName||t.name,l=(i=r=function(r){function RedirectWrapper(){var e,t,i;(0,o.default)(this,RedirectWrapper);for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t=(0,u.default)(this,r.call.apply(r,[this].concat(s))),t.state={haveRedirected:!1},i=e,(0,u.default)(t,i)}return(0,n.default)(RedirectWrapper,r),RedirectWrapper.prototype.componentWillMount=function componentWillMount(){this.conditionallyRedirect(this.props)},RedirectWrapper.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){this.conditionallyRedirect(e)},RedirectWrapper.prototype.conditionallyRedirect=function conditionallyRedirect(t){var o=e(t),r=o.redirectUrl,u=o.shouldRedirect;!this.state.haveRedirected&&u&&(this.setState({haveRedirected:!0}),this.context.router.push(r))},RedirectWrapper.prototype.render=function render(){var o,r;if(e(this.props).shouldRedirect)return null;return a.default.createElement(t,this.props)},RedirectWrapper}(a.default.Component),r.displayName=s+"RedirectWrapper",r.contextTypes={router:a.default.PropTypes.object.isRequired},i);return(0,c.default)(l,t),l}};var s,a=_interopRequireDefault(e("sbe7")),l,c=_interopRequireDefault(e("5BCV"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},EuT7:function(module,exports,e){var t=e("pY80"),o;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},u=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},GC28:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,o=_interopRequireDefault(e("iCc5")),r,u=_interopRequireDefault(e("FYw3")),i,n=_interopRequireDefault(e("mRg0")),s,a,l,c=_interopRequireDefault(e("sbe7")),d,p=_interopRequireDefault(e("QjkW")),f,m=_interopRequireDefault(e("CQyo")),h,R=_interopRequireDefault(e("AhVq")),y,v=_interopRequireDefault(e("KMW/")),D,C=_interopRequireDefault(e("8cuT")),S,g=_interopRequireDefault(e("GP6s"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e("EuT7");var q=function getLocalStorageKey(e){return"discussionSurveyDisplayed."+e},P=(a=s=function(e){function DiscussionSatisfactionSurveyModal(){var t,r,i;(0,o.default)(this,DiscussionSatisfactionSurveyModal);for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=r=(0,u.default)(this,e.call.apply(e,[this].concat(s))),r.state={showModal:!1,nextLocation:null,userConfirmed:!1},r.handleOpenSurvey=function(){R.default.safelyOpenUrl("https://www.surveymonkey.com/r/RJ22ZPH"),r.handleContinue()},r.handleContinue=function(){p.default.set(q(r.props.courseId),!0),r.setState({userConfirmed:!0,showModal:!1},function(){r.context.router.push(r.state.nextLocation)})},r.routerWillLeave=function(e){var t=r.props,o=t.courseId,u=t.sessionId,i=r.state,n=i.userConfirmed,s=i.nextLocation;if(n)return!0;if(e){var a=v.default.get("DiscussionsSatisfactionSurvey","showSatisfactionSurvey",{course_id:o,ondemand_session_id:u}),l=p.default.get(q(o));if(!a||s||l)return!0;return r.setState({showModal:!0,nextLocation:e}),!1}return!0},i=t,(0,u.default)(r,i)}return(0,n.default)(DiscussionSatisfactionSurveyModal,e),DiscussionSatisfactionSurveyModal.prototype.componentDidMount=function componentDidMount(){this.context.router.setRouteLeaveHook(this.props.currentRoute,this.routerWillLeave)},DiscussionSatisfactionSurveyModal.prototype.render=function render(){var e=this.state.showModal;return c.default.createElement("div",{className:"rc-DiscussionSatisfactionSurveyModal"},e&&c.default.createElement(m.default,{allowClose:!0,handleClose:this.handleContinue,className:"DiscussionSatisfactionModal",trackingName:"discussion_satisfaction_survey",modalName:(0,g.default)("Discussion Forums Satisfaction")},c.default.createElement("h4",null,(0,g.default)("Please take a short survey to help us improve the discussion forums.")),c.default.createElement("div",null,c.default.createElement("button",{className:"survey-open primary",onClick:this.handleOpenSurvey},(0,g.default)("Open survey in new tab"))),c.default.createElement("div",null,c.default.createElement("button",{className:"survey-continue button-link",onClick:this.handleContinue},(0,g.default)("No thanks, continue to next page")))))},DiscussionSatisfactionSurveyModal}(c.default.Component),s.propTypes={currentRoute:c.default.PropTypes.object.isRequired,courseId:c.default.PropTypes.string,sessionId:c.default.PropTypes.string},s.contextTypes={router:c.default.PropTypes.object.isRequired},a);exports.default=(0,C.default)(P,["SessionStore"],function(e){var t;return{sessionId:e.SessionStore.getSessionId()}})},pY80:function(module,exports,e){},pZ5z:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,o=_interopRequireDefault(e("iCc5")),r,u=_interopRequireDefault(e("FYw3")),i,n=_interopRequireDefault(e("mRg0")),s,a,l,c,d,p=_interopRequireDefault(e("sbe7")),f=e("VYij"),m,h=_interopRequireDefault(e("GC28")),R,y=_interopRequireDefault(e("Qr9E")),v=e("7jZ/"),D,C=_interopRequireDefault(e("L1vm")),S,g=_interopRequireDefault(e("b+bd")),q,P=_interopRequireDefault(e("2Lb7")),b,x=_interopRequireDefault(e("ngyh")),M,T=_interopRequireDefault(e("UU2Q")),w,E=_interopRequireDefault(e("GP6s"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var W=(a=s=function(e){function CourseHomeDiscussionsPage(){return(0,o.default)(this,CourseHomeDiscussionsPage),(0,u.default)(this,e.apply(this,arguments))}return(0,n.default)(CourseHomeDiscussionsPage,e),CourseHomeDiscussionsPage.prototype.render=function render(){var e=this.props,t=e.courseName,o=e.route,r=e.courseId,u=(0,E.default)("#{courseName} - Discussions",{courseName:t});return p.default.createElement("div",{className:"rc-CourseHomeDiscussionsPage"},p.default.createElement(h.default,{currentRoute:o,courseId:r}),p.default.createElement(y.default,{title:u}),this.props.children)},CourseHomeDiscussionsPage}(p.default.Component),s.propTypes={route:p.default.PropTypes.object.isRequired,courseId:p.default.PropTypes.string,courseName:p.default.PropTypes.string,children:p.default.PropTypes.node},a),N=(0,f.compose)(C.default.createTrackedContainer(function(){return{namespace:{page:"discussions"}}}),(0,g.default)(["CourseStore","CourseMembershipStore","ApplicationStore"],function(e,t){var o=e.CourseStore,r=e.CourseMembershipStore,u=e.ApplicationStore,i=r.isEnrolled()&&!r.isPreEnrolled(),n=o.getCourseId(),s=r.hasModerationRole()||u.isSuperuser(),a=i;return{courseId:n,courseName:o.getMetadata().get("name"),courseRootPath:o.getCourseRootPath(),canAccessDiscussions:!(0,v.isForumsBlacklisted)(n)&&(a||s)}}),(0,P.default)(function(e){var t,o;return{redirectUrl:e.courseRootPath,shouldRedirect:!e.canAccessDiscussions}}))(W),H=(c=l=function(e){function FluxibleCourseHomeDiscussionsPage(){return(0,o.default)(this,FluxibleCourseHomeDiscussionsPage),(0,u.default)(this,e.apply(this,arguments))}return(0,n.default)(FluxibleCourseHomeDiscussionsPage,e),FluxibleCourseHomeDiscussionsPage.prototype.componentWillMount=function componentWillMount(){this.fluxibleContext=(0,T.default)(this.context.fluxibleContext)},FluxibleCourseHomeDiscussionsPage.prototype.render=function render(){return p.default.createElement(x.default,{context:this.fluxibleContext.getComponentContext()},p.default.createElement(N,this.props))},FluxibleCourseHomeDiscussionsPage}(p.default.Component),l.contextTypes={fluxibleContext:p.default.PropTypes.object},c);exports.default=H}}]);
//# sourceMappingURL=61.6c2ef6a3465061cf22d6.js.map